
<div class="col-lg-12">
  <div class="table-responsive">
    <div class="col-lg-12" style="margin-top:10px;">
      <div class="col-lg-7" style="margin-bottom: 20px;margin-top: 6px;"> 
        <div class="col-lg-3" style="padding-top: 6px; font-weight: bold;">Criterio de Consulta:</div>
        <div class="col-lg-4" style="padding-top: 6px;">
          <select  name='selconsulta'>
            <option value="cedula" > Cédula de Identidad</option>
            <option value="codigo"> Código del Estudiante </option>
          </select >
        </div>
            
          <div class="col-lg-2" style="padding-top: 6px; font-weight: bold;">Estados:</div>
          <div class="col-lg-3" style="padding-top: 6px;">
            <select  name='selestadoord'>
              <option value="79" >Pendientes</option>
              <option value="81"> Pagadas</option>
              <option value="80"> Anuladas</option>
            </select >
          </div>
      </div>

      <div class="col-lg-5" style="margin-bottom: 20px;margin-top: 6px;">
        <div class="col-lg-4" style="padding-top: 6px; font-weight: bold;">Dato a Consultar:</div>
          <div class="col-lg-5" style="padding-top: 6px;"><input maxlength="10" onkeypress="return SoloNumeros(event);" onkeyup = "if(event.keyCode == 13) onkeydato()" style="height:22px" type="text" id="busquedaest" /></div>
        <div class="col-lg-3" style="padding-top: 3px;"><a class="btn btn-primary " id='btnconsultarest'>Consultar</a></div>
      </div>
    </div>
  </div>
</div>

<div id='divodenespagos'>

</div>

<script language="javascript">// <![CDATA[
        $(document).ready(function() {
            $('#btnconsultarest').on("click",function(event){
                onkeydato();
            });
        })

  function SoloNumeros(e) {
    var tecla = document.all ? tecla = e.keyCode : tecla = e.which;
    return ((tecla > 47 && tecla < 58) || (tecla >= 00 && tecla < 32) || tecla == 127);
  }
    
    function onkeydato() {
                var elecmentocombo = document.getElementsByName("selconsulta"); 
                var indice=elecmentocombo[0].options.selectedIndex;
                var criterio =elecmentocombo[0].options[indice].value;

                var elecmentoEstado = document.getElementsByName("selestadoord"); 
                var indice2=elecmentoEstado[0].options.selectedIndex;
                var lcEstado =elecmentoEstado[0].options[indice2].value;
                var valorBuscado=$("#busquedaest").val();
                 var idCarrera='{{idCarrera}}';
                var obj_data = {'idEstudiante':valorBuscado,'idCarrera':idCarrera,'criterio':criterio,'estado':lcEstado};
                var resultado = $('#divodenespagos');
                var jumpAction = '{{path('admin_listar_ordenpago')}}';
                var modelessOrdenPago;
          // Enviamos el formulario usando AJAX
                if (valorBuscado.length!=0)
                {
                     $.ajax({
                           url:   jumpAction,
                           data: obj_data,
                           type:  'post',
                           async: true,
                           beforeSend: function () {
                              modelessOrdenPago = new $.flavr({
                               modal   : true,
                               content : '<i class="fa fa-refresh fa-spin"></i> &nbsp;<b>Cargando...</b>',
                               buttons     : {}
                            });
                             resultado.html("Cargando, espere por favor...");
                             //notificacionIndex = cargandoSitio(null, null, null);
                    
                           },
                           success:  function (dataResponse) {
                             modelessOrdenPago.close();
                             resultado.html(dataResponse);
                             
                           },
                             error: function(dataResponse)
                        {
                          modelessOrdenPago.close();
                          //nlanzarModal('Cargado', 'fue cargado', 'cerrar');
                          form="accordion";
                          msg_alert = alert_bootstrap( form, 'Atenci&oacute;n', "Nos encontramos en mantenimiento de nuestros servidores, por favor intenta nuevamente m&aacute;s tarde.", 'sm', 'alert');
                                  $( '#'+form ).append( msg_alert );
                                  $('#modal-'+form).modal('show');
                        },
                   //         timeout: 50000
                           dataType:'html'
                        });
                }
                else
                {
                     modelessActualizadOrden= new $.flavr({
                                                   modal   : true,
                                                   content : 'Por favor, ingrese un dato para consultar',
                                                   buttons     : {
                                                      primary : { text: 'Aceptar', style: 'primary' }
                                                   }
                                                });
                }
           
            }
                    
</script>
