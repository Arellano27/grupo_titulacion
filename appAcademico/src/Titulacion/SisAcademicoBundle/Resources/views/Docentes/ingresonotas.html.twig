
	<link rel="stylesheet" href="{{ asset('js/jqueryValidate/demo/css/screen.css') }}">
	
	<script src="{{ asset('js/jqueryValidate/dist/jquery.validate.js') }}"></script>
        <script src="{{ asset('js/jqueryValidate/dist/additional-methods.js') }}"></script>
        
	<script>


	$(document).ready(function() {
        /*   $("#btn-guardar").click(function(){
$("#formulario").submit();  
});*/

		// validate signup form on keyup and submit
		$("#form-ingresonotas").validate({
                    
			rules: {
                                academicos_1: { required: true, number: true,max: 10 },
				academicos_2: { required: true, number: true,max: 10 },
                                academicos_3: { required: true, number: true,max: 10 },
				username: {
					required: true,
					minlength: 2
				},
				password: {
					required: true,
					minlength: 5
				},
				confirm_password: {
					required: true,
					minlength: 5,
					equalTo: "#password"
				},
				email: {
					required: true,
					email: true
				},
				topic: {
					required: "#newsletter:checked",
					minlength: 2
				},
				agree: "required"
			},
			messages: {
				academicos_1: {required:"Ingrese la nota", number: 'Debe ingresar un número',max: 'el numero ingresado debe ser menor a 10'},
				academicos_2: {required:"Ingrese la nota", number: 'Debe ingresar un número',max: 'el numero ingresado debe ser menor a 10'},
                                academicos_3: {required:"Ingrese la nota", number: 'Debe ingresar un número',max: 'el numero ingresado debe ser menor a 10'},
				username: {
					required: "Please enter a username",
					minlength: "Your username must consist of at least 2 characters"
				},
				password: {
					required: "Please provide a password",
					minlength: "Your password must be at least 5 characters long"
				},
				confirm_password: {
					required: "Please provide a password",
					minlength: "Your password must be at least 5 characters long",
					equalTo: "Please enter the same password as above"
				},
				email: "Please enter a valid email address",
				agree: "Please accept our policy",
				topic: "Please select at least 2 topics"
			}
		});
                
                // propose username by combining first- and lastname
		$("#academicos_1").focus(function() {
			close_modal('ingresonotas');
		});

		// propose username by combining first- and lastname
		$("#username").focus(function() {
			var firstname = $("#firstname").val();
			var lastname = $("#lastname").val();
			if (firstname && lastname && !this.value) {
				this.value = firstname + "." + lastname;
			}
		});

		//code to hide topic selection, disable for demo
		var newsletter = $("#newsletter");
		// newsletter topics are optional, hide at first
		var inital = newsletter.is(":checked");
		var topics = $("#newsletter_topics")[inital ? "removeClass" : "addClass"]("gray");
		var topicInputs = topics.find("input").attr("disabled", !inital);
		// show when newsletter is checked
		newsletter.click(function() {
			topics[this.checked ? "removeClass" : "addClass"]("gray");
			topicInputs.attr("disabled", !this.checked);
		});
	});
	</script>
	<style>
	#commentForm {
		width: 500px;
	}
	#commentForm label {
		width: 250px;
	}
	#commentForm label.error, #commentForm input.submit {
		margin-left: 253px;
	}
	#signupForm {
		width: 670px;
	}
	#signupForm label.error {
		margin-left: 10px;
		width: auto;
		display: inline;
	}
	#newsletter_topics label.error {
		display: none;
		margin-left: 103px;
	}
	</style>

<form id="form-ingresonotas" name="form-ingresonotas" method="post" action="{{ path('docentes_ingresar_nota') }}"  onsubmit="return false;">     
<div class="row" id="tabla1">
                <div class="col-lg-12">
                  <div ng-controller="AppCtrl">
 
   
</div>
                      
                            <div class="dataTable_wrapper col-lg-12">
                                <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                                    <thead>
                                        <tr>
                                            <th rowspan="2" class="text-center " style="vertical-align: middle" >Codigo</th>
                                            <th rowspan="2" style="text-align: center;vertical-align: middle">Estudiante</th>
                                           
                                        
                                            <th colspan="{{ arr_tareas|length}}" class="text-center">Académicos</th>
                                            {#<th rowspan="2" style="text-align: center;vertical-align: middle">Examen</th>#}
                                             <th rowspan="2" style="text-align: center;vertical-align: middle">Total</th>
                                        </tr>
                                        <tr>
                                            {%for num ,tareas in arr_tareas %}
                                             <th class="text-center">{{tareas.componente}}</th>
                                             <input type = "hidden" value = "{{ tareas.idNota }}" name = "hdtarea_{{num+1}}" />
                                            {% endfor %}
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <input type = "hidden" value = "nada" id = "hdservicio" name = "hdservicio" />
                                
                                       <tr class="odd gradeX">
                                           <td width = "5%" >{{ codigo }}</td>
                                           
                                            <td width = 
                                                "20%">{{ alumno }} <input type = "hidden" value = "{{ codigo }}" name = "hdalumno" /></td>
                                            {%for count ,tareas in arr_tareas %}
                                            <td><input class="form-control inputNota" name="academicos_{{count+1}}" id="academicos_{{count+1}}" type="text"  value=""/></td>
                                            {% endfor %}
                                            
                                            {#<td><input class="form-control" name="examen" type="text"  value=""/></td>#}
                                            <td class="center"><input class="form-control" name="nota" type="text" id="nota" disabled></td>
                                        </tr>
                                  <input type = "hidden" value = "{{parcial}}" name = "hdparcial" id = "hdparcial"/>
                                  <input type = "hidden" value = "{{ arr_tareas|length}}" name = "hdcount" id = "hdcount"/>
                                   </tbody>
                                </table>
                            </div>
 
                                   
                            <!-- /.table-responsive -->
                            <div class="well">
                                <h4>Nota :</h4>
                                <p>Por su seguridad se recomienda verificar que las notas ingresadas sean las correctas</p>
                                <div class="text-center ">
                                <button type="button" class="btn btn-primary" id="btn-guardar" >Guardar</button>
                                </div>
                            </div>
                            
                           

                    
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>

</form>
<script>
    var limite = 40;
    
    $('#btn-guardar').on('click', function() {
      
        var txt='{{ arr_tareas|length}}';

    		var validator =$("#form-ingresonotas").validate({
                    
			rules: {
                                academicos_1: { required: true, number: true,max: 10 },
				academicos_2: { required: true, number: true,max: 10 },
                                academicos_3: { required: true, number: true,max: 10 },
				username: {
					required: true,
					minlength: 2
				},
				password: {
					required: true,
					minlength: 5
				},
				confirm_password: {
					required: true,
					minlength: 5,
					equalTo: "#password"
				},
				email: {
					required: true,
					email: true
				},
				topic: {
					required: "#newsletter:checked",
					minlength: 2
				},
				agree: "required"
			},
			messages: {
				academicos_1: {required:"Ingrese la nota", number: 'Debe ingresar un número',max: 'el numero ingresado debe ser menor a 10'},
				academicos_2: {required:"Ingrese la nota", number: 'Debe ingresar un número',max: 'el numero ingresado debe ser menor a 10'},
                                academicos_3: {required:"Ingrese la nota", number: 'Debe ingresar un número',max: 'el numero ingresado debe ser menor a 10'},
				username: {
					required: "Please enter a username",
					minlength: "Your username must consist of at least 2 characters"
				},
				password: {
					required: "Please provide a password",
					minlength: "Your password must be at least 5 characters long"
				},
				confirm_password: {
					required: "Please provide a password",
					minlength: "Your password must be at least 5 characters long",
					equalTo: "Please enter the same password as above"
				},
				email: "Please enter a valid email address",
				agree: "Please accept our policy",
				topic: "Please select at least 2 topics"
			}
		});
                
             
               var band= $("#form-ingresonotas").valid();
               if(band)
               {
                   confirm('ingresonotas');
               }
           
});
 $(".inputNota").keyup(function(e)
    {
      var txt='{{ arr_tareas|length}}';
        // obtenemos el texto que está escrito en el textarea
        var box = $("#hdcount").val();
       // alert(box);
        var suma =0;
        for(var i=1; i <= txt; i++)
        { 
           var nota = $("#academicos_"+i).val();
           if( nota ===""){
               nota=0;
           }
          
          suma=suma+parseFloat(nota);
        }

                      suma=suma.toFixed(2);
            $('#nota').val(suma); });
    

</script>
            