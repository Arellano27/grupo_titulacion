{% block home %}
<!-- /.panel-heading -->
<div class="panel-body">
  <!-- Nav tabs -->
 {#{{ "now"|date("d/m/Y","America/Buenos_Aires") }}
   {{ fecha|date("m/d/Y") }}#}
  <ul class="nav nav-tabs">
    <li class="active"><a  data-toggle="tab" class="tabNotas" id="consulta">Consulta de Asistencias</a></li>
    {% if fecha != '' %}
    <li><a data-toggle="tab" class="tabNotas"  id="ingreso">Ingreso de Asistencias</a></li>
    {% endif %}
    <li><a data-toggle="tab" class="tabNotas"  id="actualiza">Actualización de Asistencias</a></li>
     {#<li><a data-toggle="tab" class="tabNotas"  id="ingreso2">Listar Alumnos</a></li>#}
  </ul>

  <!-- Tab panes -->

   {# <div class="tab-pane fade in active" id="content-notas"></div>#}
   <div  id="panelAsistenciasCarrera-{{idCarrera}}" class="panel-body"></div>
  </div>

<script type="text/javascript">
   $(document).ready(function() { 
      var condition = '{{ condition }}';
      if (condition == '') {
         var idMateria     = '{{ idMateria }}';
         var idCarrera     = '{{ idCarrera }}';
         var inicioCiclo    ='{{ inicioCiclo }}';
         var finCiclo      = '{{ finCiclo }}';
         var obj_data      = {'idMateria':idMateria,'idCarrera':idCarrera, 'inicioCiclo':inicioCiclo, 'finCiclo':finCiclo};
 
         mostrarInfoTabsNotas('panelAsistenciasCarrera-{{idCarrera}}','{{ path('docentes_listado_alumnos_materia') }}', obj_data);
      }

     {#mostrarAlumnos('alumnos3','{ path('docentes_mostrarAlumnoexamen') }','2345');#}
   });

   $(".tabNotas").click(function(){
      var tabs          = $(this).attr('id');
      var idMateria     = '{{ idMateria }}';
      var idCarrera     = '{{ idCarrera }}';
      
      if(tabs === 'consulta' ) {
         var inicioCiclo    ='{{ inicioCiclo }}';
         var finCiclo      = '{{ finCiclo }}';
         var obj_data      = {'idMateria':idMateria,'idCarrera':idCarrera, 'inicioCiclo':inicioCiclo, 'finCiclo':finCiclo};
         mostrarInfoTabsNotas('panelAsistenciasCarrera-{{idCarrera}}','{{ path('docentes_listado_alumnos_materia') }}', obj_data);
      }
      if(tabs ==='ingreso'){
         tabdocentes('panelAsistenciasCarrera-{{idCarrera}}','{{ path('docentes_asistencia_alumnos') }}',idMateria,idCarrera);
      }
      if(tabs ==='actualiza'){
         tabdocentes('panelAsistenciasCarrera-{{idCarrera}}','{{ path('docentes_actualiza_asis') }}',idMateria,idCarrera);
      }
      if(tabs ==='ingreso2'){
         var idMateria     = '{{ idMateria }}';
         tabdocentes('panelAsistenciasCarrera-{{idCarrera}}','{{ path('admin_lista_estudiantes') }}',idMateria,idCarrera);
      }
     
   });
   
   function mostrarInfoTabsNotas(idContenedor,urlConsulta, parametros){
      var modelessDocentesTabsNotas;
   
      var obj_data = parametros;
      $.ajax({
         type: 'post',
         url: urlConsulta,
         data: obj_data,
         dataType: "html",
         beforeSend: function() { 
            $( "#content-"+idContenedor ).html("Cargando, espere por favor...");
            $( "#content-"+idContenedor ).html( "<div id='loading-bar-spinner-relative'><div class='spinner-icon'></div></div>" );
            modelessDocentesTabsNotas = new $.flavr({
                                                      modal   : true,
                                                      content : '<i class="fa fa-refresh fa-spin"></i> &nbsp;<b>Cargando...</b>',
                                                      buttons     : {}
                                                   });
         },
         error: function(){
            //console.log("hay un error");
            modelessDocentesTabsNotas.close();
            var mensajeErrorNotas   = "Lo sentimos. Se  presentó un error para cargar la consulta de las Asistencias."
            $( "#"+idContenedor ).html(mensajeErrorNotas);
         },
         success: function(data) {
            {#if(data.error === true){
               $( "#loading-bar-spinner-relative" ).remove();
               msg_alert = alert_bootstrap( id, 'Atenci&oacute;n', data.msg, 'sm', 'alert');
               $( "#content-"+id ).append( msg_alert );
               $('#modal-'+id).modal('show');
            }else{
               $( "#content-"+id ).html(data.html);
            }#}
            modelessDocentesTabsNotas.close();
            //$("#menu-toggle").click();
            $( "#"+idContenedor ).html(data);
         }
      });
   }
</script>
{% endblock %}	